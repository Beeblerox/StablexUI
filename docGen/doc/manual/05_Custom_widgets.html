<div class="manual">
<h2>Creating custom widget</h2>

To create your own widget you need to extend one of ru.stablex.ui.widgets.* classes.
All of those classes extend <a class="type" href="/ui/doc/#ru/stablex/ui/widgets/Widget.html" title="ru.stablex.ui.widgets.Widget">Widget</a>.

Let's create widget wich background is always filled with some user-defined color :)
First of all we need to write class for this widget:

<div class="haxe">
<i>/**</i>
<i>* Simple custom widget. Background color of <span class="this">this</span> widget is defined by .color property.</i>
<i>*</i>
<i>*/</i>
<div class="classDef"> <span class="class">class</span> <span class="className">ColorWidget</span> <span class="extends">extends</span> <a class="type" href="/ui/doc/#ru/stablex/ui/widgets/Widget.html" title="ru.stablex.ui.widgets.Widget">Widget</a>{</div>

    <i>//property to define background color. By default it's black</i>
<div class="definition">    <span class="public">public</span> <span class="var">var</span> <span class="definitionName">color</span> : <a class="type" href="/ui/doc/#http://haxe.org/api/Int" title="Int">Int</a> = 0x000000;</div>


<i>    /**</i>
<i>    * If you need to do something in constructor, here is how it's done.</i>
<i>    *</i>
<i>    */</i>
<div class="definition">    <span class="public">public</span> <span class="function">function</span> <span class="definitionName">new</span> () : <a class="type" href="/ui/doc/#http://haxe.org/api/Void" title="Void">Void</a> {</div>
        <span class="super">super</span>();

        <i>//any code, you need</i>

    }<i>//function new()</i>


<i>    /**</i>
<i>    * This method is called at least once - on widget creation is complete.</i>
<i>    * For <span class="this">this</span> widget we want to update background color on refresh.</i>
<i>    */</i>
<div class="definition">    <span class="override">override</span> <span class="public">public</span> <span class="function">function</span> <span class="definitionName">refresh</span> () : <a class="type" href="/ui/doc/#http://haxe.org/api/Void" title="Void">Void</a> {</div>
        <span class="super">super</span>.refresh();
        <span class="this">this</span>._paintBackground();
    }<i>//function refresh()</i>


<i>    /**</i>
<i>    * This method is called every time widget is resized</i>
<i>    * For <span class="this">this</span> widget we want to update painted background area on resize.</i>
<i>    */</i>
<div class="definition">    <span class="override">override</span> <span class="public">public</span> <span class="function">function</span> <span class="definitionName">onResize</span> () : <a class="type" href="/ui/doc/#http://haxe.org/api/Void" title="Void">Void</a> {</div>
        <span class="super">super</span>.onResize();
        <span class="this">this</span>._paintBackground();
    }<i>//function onResize()</i>


<i>    /**</i>
<i>    * This method fills background with defined by `color` property color</i>
<i>    *</i>
<i>    */</i>
<div class="definition">    <span class="private">private</span> <span class="function">function</span> <span class="definitionName">_paintBackground</span> () : <a class="type" href="/ui/doc/#http://haxe.org/api/Void" title="Void">Void</a> {</div>
        <span class="this">this</span>.graphics.clear();
        <span class="this">this</span>.graphics.beginFill(<span class="this">this</span>.color);
        <span class="this">this</span>.graphics.drawRect(0, 0, <span class="this">this</span>.w, <span class="this">this</span>.h);
        <span class="this">this</span>.graphics.endFill();
    }<i>//function _paintBackground()</i>
}<i>//class ColorWidget</i>

</div>
Now, to demonstrate it in action, create `main.xml`:

<div class="xml">
&lt;?xml <span class="attr">version</span>=<span class="quotes">"</span>1.0<span class="quotes">"</span> <span class="attr">encoding</span>=<span class="quotes">"</span>UTF-8<span class="quotes">"</span>?&gt;

&lt;<span class="tag"><a class="type" href="/ui/doc/#ru/stablex/ui/widgets/HBox.html" title="ru.stablex.ui.widgets.HBox">HBox</a></span> <span class="attr">padding</span>=<span class="quotes">"</span>20<span class="quotes">"</span> <span class="attr">childPadding</span>=<span class="quotes">"</span>20<span class="quotes">"</span>&gt;
    &lt;<span class="tag"><a class="type" href="/ui/doc/#ru/stablex/ui/widgets/ColorWidget.html" title="ru.stablex.ui.widgets.ColorWidget">ColorWidget</a></span> <span class="attr">id</span>=<span class="quotes">"</span>'custom'<span class="quotes">"</span> <span class="attr">w</span>=<span class="quotes">"</span>200<span class="quotes">"</span> <span class="attr">h</span>=<span class="quotes">"</span>100<span class="quotes">"</span> <span class="attr">color</span>=<span class="quotes">"</span>0x0000FF<span class="quotes">"</span> /&gt;
    &lt;<span class="tag"><a class="type" href="/ui/doc/#ru/stablex/ui/widgets/Button.html" title="ru.stablex.ui.widgets.Button">Button</a></span> <span class="attr">text</span>=<span class="quotes">"</span>'set random color'<span class="quotes">"</span> <span class="attr">bgColor</span>=<span class="quotes">"</span>0x999999<span class="quotes">"</span> <span class="attr">on-click</span>=<span class="quotes">"</span>
        <span class="placeholder"><span class="placeholder">#ColorWidget</span>(custom)</span>.color = Std.random(0xFFFFFF);
        <span class="placeholder">#custom</span>.refresh();
    <span class="quotes">"</span>/&gt;
&lt;/<span class="tag"><a class="type" href="/ui/doc/#ru/stablex/ui/widgets/HBox.html" title="ru.stablex.ui.widgets.HBox">HBox</a></span>&gt;

</div>
And don't forget to register new widget in StablexUI:

<div class="haxe">
<div class="classDef"> <span class="class">class</span> <span class="className">Main</span> <span class="extends">extends</span> <a class="type" href="/ui/doc/#http://nme.io/api/types/nme/display/Sprite.html" title="nme.display.Sprite">Sprite</a>{</div>
<i>    /**</i>
<i>    * Enrty point</i>
<i>    *</i>
<i>    */</i>
<div class="definition">    <span class="static">static</span> <span class="public">public</span> <span class="function">function</span> <span class="definitionName">main</span> () : <a class="type" href="/ui/doc/#http://haxe.org/api/Void" title="Void">Void</a>{</div>

        <i>//Register our custom widget, so we can use it in xml</i>
        <a class="type" href="/ui/doc/#ru/stablex/ui/UIBuilder.html" title="ru.stablex.ui.UIBuilder">UIBuilder</a>.regClass('ColorWidget');

        <i>//initialize StablexUI</i>
        <a class="type" href="/ui/doc/#ru/stablex/ui/UIBuilder.html" title="ru.stablex.ui.UIBuilder">UIBuilder</a>.init();

        <i>//Create our UI</i>
        <a class="type" href="/ui/doc/#http://nme.io/api/types/nme/Lib.html" title="nme.Lib">Lib</a>.current.addChild( <a class="type" href="/ui/doc/#ru/stablex/ui/UIBuilder.html" title="ru.stablex.ui.UIBuilder">UIBuilder</a>.buildFn('main.xml')() );
    }<i>//function main()</i>
}<i>//class Main</i>

</div>
See it in action: <a href="/ui/demo/05_custom_widget.swf" target="_blank">flash</a> or <a href="/ui/demo/05_custom_widget" target="_blank">html5</a>.
You can find sample source code in samples/05_custom_widget on <a href="https://github.com/RealyUniqueName/StablexUI" target="_blank">GitHub</a>.


</div>
