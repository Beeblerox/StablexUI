<div class="manual">
<h2>Creating UI elements</h2>

For StablexUI widgets are objects wich can be used in gui. These are buttons,
panels, text fields, etc. All widgets' classes extend <a class="type" href="/ui/doc/#ru/stablex/ui/widgets/Widget.html" title="ru.stablex.ui.widgets.Widget">Widget</a> wich extends <a class="type" href="/ui/doc/#http://nme.io/api/types/nme/display/Sprite.html" title="nme.display.Sprite">Sprite</a>.

To create our first gui, let's write xml like this:

<div class="xml">
&lt;?xml <span class="attr">version</span>=<span class="quotes">"</span>1.0<span class="quotes">"</span> <span class="attr">encoding</span>=<span class="quotes">"</span>UTF-8<span class="quotes">"</span>?&gt;

&lt;<span class="tag"><a class="type" href="/ui/doc/#ru/stablex/ui/widgets/Text.html" title="ru.stablex.ui.widgets.Text">Text</a></span> <span class="attr">left</span>=<span class="quotes">"</span>50<span class="quotes">"</span> <span class="attr">top</span>=<span class="quotes">"</span>100<span class="quotes">"</span> <span class="attr">text</span>=<span class="quotes">"</span>'My first widget!'<span class="quotes">"</span>/&gt;

</div>
Please, notice that it's necessary to use double quotes and single quotes simultaneously
for string properties. Call this file 'first.xml' and place it wherever to your project.
You don't need to include this file in your assets managed by NME.
Let's analyze content of the file:
    Line '&lt;?xml version="1.0" encoding="UTF-8"?&gt;' must be the first line of any xml file;
    <a class="type" href="/ui/doc/#ru/stablex/ui/widgets/Text.html" title="ru.stablex.ui.widgets.Text">Text</a> - class of widget we want to create;
    left, top - properties of Text widget class inherited from <a class="type" href="/ui/doc/#ru/stablex/ui/widgets/Widget.html" title="ru.stablex.ui.widgets.Widget">Widget</a>.
                These properties define widget position by x and y coordinates respectively.
                Of course,  instead of .left and .top you can assign .x and .y properties
                directly in xml since these properties are inherited from <a class="type" href="/ui/doc/#http://nme.io/api/types/nme/display/Sprite.html" title="nme.display.Sprite">Sprite</a>.
                And in this example you will get the same result using .x and .y,
                but it is recommended to always use .left and .top for widgets.
    text - own property of <a class="type" href="/ui/doc/#ru/stablex/ui/widgets/Text.html" title="ru.stablex.ui.widgets.Text">Text</a> class (click to see api for that class).
StablexUI will create text field based on first.xml with text 'My first widget!'.
This field will be placed with .x=50 and .y=100.
Here is the haxe code wich will do the job:

<div class="haxe">
nme.Lib.current.addChild( <a class="type" href="/ui/doc/#ru/stablex/ui/UIBuilder.html" title="ru.stablex.ui.UIBuilder">UIBuilder</a>.buildFn('first.xml')() );

</div>
Don't forget empty parentheses after 'first.xml'. That's all! You've just created your first UI :)
Build your project to any target or see result in <a href="/ui/demo/02_first.swf" target="_blank">flash</a> or in <a href="/ui/demo/02_first" target="_blank">html5</a>.
Full project code is included in samples on <a href="https://github.com/RealyUniqueName/StablexUI" target="_blank">GitHub</a>.


</div>
<div class="manual">
<h2>Under the hood</h2>

Remember double and single quotes and empty parentheses? I bet you think: "What for?".
It's because <a class="type" href="/ui/doc/#ru/stablex/ui/UIBuilder.html" title="ru.stablex.ui.UIBuilder">UIBuilder</a>.buildFn() is a macro function wich generates a closure for gui creation.
To make it clear, next code does the same thing as code above:

<div class="haxe">
<div class="definition"><span class="var">var</span> <span class="definitionName">fn</span> : <a class="type" href="/ui/doc/#http://haxe.org/api/Dynamic" title="Dynamic">Dynamic</a>-&gt;<a class="type" href="/ui/doc/#ru/stablex/ui/Widgets/Text.html" title="ru.stablex.ui.Widgets.Text">Text</a> = <a class="type" href="/ui/doc/#ru/stablex/ui/UIBuilder.html" title="ru.stablex.ui.UIBuilder">UIBuilder</a>.buildFn('first.xml');</div>
nme.Lib.current.addChild( fn() );

</div>
Type of closure is <a class="type" href="/ui/doc/#http://haxe.org/api/Dynamic" title="Dynamic">Dynamic</a>-&gt;<a class="type" href="/ui/doc/#ru/stablex/ui/Widgets/Text.html" title="ru.stablex.ui.Widgets.Text">Text</a> because the type of root element in xml
is <a class="type" href="/ui/doc/#ru/stablex/ui/widgets/Text.html" title="ru.stablex.ui.widgets.Text">Text</a>. To see what does StablexUI actualy do, look at next code. This is how your code
is translated by StablexUI for haxe compiler when you build project:

<div class="haxe">
<div class="definition"><span class="var">var</span> <span class="definitionName">fn</span> : <a class="type" href="/ui/doc/#http://haxe.org/api/Dynamic" title="Dynamic">Dynamic</a>-&gt;<a class="type" href="/ui/doc/#ru/stablex/ui/Widgets/Text.html" title="ru.stablex.ui.Widgets.Text">Text</a> = <span class="function">function</span>(arguments:<a class="type" href="/ui/doc/#http://haxe.org/api/Dynamic" title="Dynamic">Dynamic</a> = <span class="null">null</span>) : <a class="type" href="/ui/doc/#ru/stablex/ui/widgets/Text.html" title="ru.stablex.ui.widgets.Text">Text</a> {</div>
<div class="definition">    <span class="var">var</span> <span class="definitionName">widget</span> : <a class="type" href="/ui/doc/#ru/stablex/ui/widgets/Text.html" title="ru.stablex.ui.widgets.Text">Text</a> = ... <i>// UIBuilder actions to create widget object</div></i>
    widget.left = 50;
    widget.top  = 100;
    widget.text = 'My first widget!';
    widget.onCreate(); <i>//Here widget is notified it is created</i>
    <span class="return">return</span> widget;
};
nme.Lib.current.addChild( fn() );

</div>
I guess, you understand about parentheses now. And single quotes are required for string
properties in xml because otherwise StablexUI will generate code

<div class="haxe">
widget.text = My first widget!;

</div>
wich of course breaks Haxe syntax.


</div>
<div class="manual">
<h2>Nested widgets</h2>

Every widget can contain children since <a class="type" href="/ui/doc/#ru/stablex/ui/widgets/Widget.html" title="ru.stablex.ui.widgets.Widget">Widget</a> inherits from <a class="type" href="/ui/doc/#http://nme.io/api/types/nme/display/DisplayObjectContainer.html" title="nme.display.DisplayObjectContainer">DisplayObjectContainer</a>.
Child widgets behave like ordinary display objects in terms of position/scale/alpha etc.
Lets modify above sample. Place that text field to panel:

<div class="xml">
&lt;?xml <span class="attr">version</span>=<span class="quotes">"</span>1.0<span class="quotes">"</span> <span class="attr">encoding</span>=<span class="quotes">"</span>UTF-8<span class="quotes">"</span>?&gt;

<i>&lt;!-- .w and .h properties define widget's area width and height respectively --&gt;</i>
&lt;<span class="tag"><a class="type" href="/ui/doc/#ru/stablex/ui/widgets/Panel.html" title="ru.stablex.ui.widgets.Panel">Panel</a></span> <span class="attr">border</span>=<span class="quotes">"</span>1<span class="quotes">"</span> <span class="attr">w</span>=<span class="quotes">"</span>400<span class="quotes">"</span> <span class="attr">h</span>=<span class="quotes">"</span>400<span class="quotes">"</span> <span class="attr">left</span>=<span class="quotes">"</span>50<span class="quotes">"</span> <span class="attr">top</span>=<span class="quotes">"</span>100<span class="quotes">"</span>&gt;
    &lt;<span class="tag"><a class="type" href="/ui/doc/#ru/stablex/ui/widgets/Text.html" title="ru.stablex.ui.widgets.Text">Text</a></span> <span class="attr">left</span>=<span class="quotes">"</span>50<span class="quotes">"</span> <span class="attr">top</span>=<span class="quotes">"</span>100<span class="quotes">"</span> <span class="attr">text</span>=<span class="quotes">"</span>'My first widget!'<span class="quotes">"</span> /&gt;
&lt;/<span class="tag"><a class="type" href="/ui/doc/#ru/stablex/ui/widgets/Panel.html" title="ru.stablex.ui.widgets.Panel">Panel</a></span>&gt;


</div>
Now text field will be positioned in panel's system of axes. Build project to see how it
looks or look at <a href="/ui/demo/02_nested.swf" target="_blank">flash</a> or at <a href="/ui/demo/02_nested" target="_blank">html5</a>
You can create nested widgets indefinite levels deep.


</div>
<div class="manual">
<h2>Creating widgets at runtime without xml</h2>

It's also possible to create widgets with plain Haxe without xml.
For this purpose you should use <a class="type" href="/ui/doc/#ru/stablex/ui/UIBuilder.html" title="ru.stablex.ui.UIBuilder">UIBuilder</a>.create() method.
Here is example how to create exactly the same widget as in our first excercise without xml:

<div class="haxe">
<div class="definition"><span class="var">var</span> widget = <a class="type" href="/ui/doc/#ru/stablex/ui/UIBuilder.html" title="ru.stablex.ui.UIBuilder">UIBuilder</a>.create(<a class="type" href="/ui/doc/#ru/stablex/ui/widgets/Text.html" title="ru.stablex.ui.widgets.Text">Text</a>, {</div>
    left : 50,
    top  : 100,
    text : 'My first widget!'
});
nme.Lib.current.addChild( widget );

</div>
To dynamically manage widget's children, use ordinary <a class="type" href="/ui/doc/#http://nme.io/api/types/nme/display/DisplayObjectContainer.html" title="nme.display.DisplayObjectContainer">DisplayObjectContainer</a> methods:

<div class="haxe">
widget1.addChild(widget2);
widget1.removeChild(widget2);
widget1.addChildAt(widget2, 0);
widget1.removeChildAt(0);

</div>

</div>
<div class="manual">
<h2>Widget ID</h2>

Every widget has its own unique id. So you can get any widget object from any place in code:
To set widget id in xml, use `id` attribute:

<div class="xml">
&lt;?xml <span class="attr">version</span>=<span class="quotes">"</span>1.0<span class="quotes">"</span> <span class="attr">encoding</span>=<span class="quotes">"</span>UTF-8<span class="quotes">"</span>?&gt;

&lt;<span class="tag"><a class="type" href="/ui/doc/#ru/stablex/ui/widgets/Text.html" title="ru.stablex.ui.widgets.Text">Text</a></span> <span class="attr">id</span>=<span class="quotes">"</span>'myWidget'<span class="quotes">"</span> <span class="attr">left</span>=<span class="quotes">"</span>50<span class="quotes">"</span> <span class="attr">top</span>=<span class="quotes">"</span>100<span class="quotes">"</span> <span class="attr">text</span>=<span class="quotes">"</span>'My first widget!'<span class="quotes">"</span>/&gt;

</div>
Or in haxe use `.id` property:

<div class="haxe">
ru.stablex.ui.UIBuilder.create(<a class="type" href="/ui/doc/#ru/stablex/ui/widgets/Text.html" title="ru.stablex.ui.widgets.Text">Text</a>, {
    id   : 'myWidget',
    left : 50,
    top  : 100,
    text : 'My first widget!'
});

</div>
You can also change .id property any time in haxe as long as new value is unique across all existing widgets.
Then to get widget object anywhere in code, use following snippet:

<div class="haxe">
<div class="definition"><span class="var">var</span> <span class="definitionName">widget</span> : <a class="type" href="/ui/doc/#ru/stablex/ui/widgets/Text.html" title="ru.stablex.ui.widgets.Text">Text</a> = <span class="cast">cast</span> <a class="type" href="/ui/doc/#ru/stablex/ui/UIBuilder.html" title="ru.stablex.ui.UIBuilder">UIBuilder</a>.get('myWidget');</div>
trace(widget.text); <i>//outputs: My first widget!</i>

</div>

</div>
<div class="manual">
<h2>Destroying widgets</h2>

To destroy widget use .free() method of <a class="type" href="/ui/doc/#ru/stablex/ui/Widget.html" title="ru.stablex.ui.Widget">Widget</a> class.
All widget children will be removed, widget will remove itself from parent's display list
and remove any added eventListeners. Make sure you cleared any other links to that widget.
Method .free() has optional <a class="type" href="/ui/doc/#http://haxe.org/api/Bool" title="Bool">Bool</a> parameter. Use .free(true) to also destroy every
child widget.

</div>
